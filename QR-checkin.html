<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>å…¥ä½ä¿¡æ¯ QR å¡ç”Ÿæˆå™¨</title>
  <style>
    body {
      font-family: "Inter", -apple-system, BlinkMacSystemFont, sans-serif;
      background: #0d0d0f;
      color: #fff;
      padding: 20px;
      margin: 0;
    }
    .container {
      max-width: 600px;
      margin: 0 auto;
    }
    h1 {
      text-align: center;
      margin-bottom: 20px;
      font-size: 24px;
    }
    .card {
      background: #1a1a1d;
      padding: 20px;
      border-radius: 12px;
      border: 1px solid #333;
    }
    label {
      display: block;
      margin-top: 15px;
      font-size: 14px;
      color: #bbb;
      font-weight: bold;
    }
    input, textarea {
      width: 100%;
      padding: 12px;
      margin-top: 8px;
      border-radius: 8px;
      border: 1px solid #444;
      background: #252528;
      color: #fff;
      box-sizing: border-box;
      font-size: 15px;
    }
    textarea {
      min-height: 80px;
      line-height: 1.5;
    }
    button {
      width: 100%;
      padding: 16px;
      margin-top: 25px;
      background: #4a7bee;
      border: none;
      border-radius: 8px;
      color: white;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
    }
    button:hover {
      background: #3a6bde;
    }
    
    /* é¢„è§ˆåŒºåŸŸ */
    #preview {
      margin-top: 30px;
      padding: 30px 20px;
      background: #fff; /* é¢„è§ˆå¡ç‰‡æ•´ä½“ç”¨ç™½è‰²ï¼Œæ¨¡æ‹Ÿæ‰“å°çº¸æ•ˆæœ */
      color: #000;     /* é»‘è‰²æ–‡å­— */
      border-radius: 12px;
      text-align: center;
      display: none;   /* åˆå§‹éšè— */
    }
    
    .preview-header {
      font-size: 20px;
      font-weight: bold;
      margin-bottom: 15px;
      border-bottom: 2px solid #000;
      display: inline-block;
      padding-bottom: 5px;
    }

    /* äºŒç»´ç å®¹å™¨ */
    #qrcode {
      display: flex;
      justify-content: center;
      margin: 10px auto;
    }
    
    .preview-footer {
      margin-top: 15px;
      font-size: 12px;
      color: #555;
    }
  </style>
</head>
<body>

<div class="container">
  <h1>ğŸ  å…¥ä½ QR ç”Ÿæˆå™¨</h1>

  <div class="card">
    <label>æˆ¿æºåç§°</label>
    <input id="roomName" value="å®¿æ –æ–°å®¿A" />

    <label>WiFi ä¿¡æ¯</label>
    <textarea id="wifiInfo">SSID: MyHostel_Wifi
å¯†ç : 88888888</textarea>

    <label>å…¥ä½æŒ‡å¼•</label>
    <textarea id="checkinInfo">å¤§é—¨å¯†ç ï¼š1234#
è¿›é—¨åå·¦è½¬ä¸Šæ¥¼ã€‚</textarea>

    <label>å…¶ä»–å¤‡æ³¨</label>
    <textarea id="extraInfo">é€€æˆ¿æ—¶é—´ï¼š12:00
ç´§æ€¥è”ç³»ï¼š13800000000</textarea>

    <button onclick="generate()">ç”Ÿæˆå…¥ä½å¡</button>
  </div>

  <div id="preview">
    <div class="preview-header" id="pTitle">æˆ¿æºåç§°</div>
    <div id="qrcode"></div>
    <div class="preview-footer">è¯·ä½¿ç”¨å¾®ä¿¡æˆ–ç›¸æœºæ‰«ææŸ¥çœ‹å®Œæ•´ä¿¡æ¯</div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/easyqrcodejs@4.5.0/dist/easy.qrcode.min.js"></script>

<script>
  let qrcodeObj = null;

  function generate() {
    // 1. è·å–å†…å®¹
    const room = document.getElementById('roomName').value || 'å…¥ä½æŒ‡å—';
    const wifi = document.getElementById('wifiInfo').value;
    const checkin = document.getElementById('checkinInfo').value;
    const extra = document.getElementById('extraInfo').value;

    // 2. æ‹¼æ¥æ–‡æœ¬
    // æ³¨æ„ï¼šå¼€å¤´åŠ ä¸Šä¸­æ–‡æ ‡é¢˜ï¼Œé¿å…iOSç›¸æœºè¯†åˆ«æˆç”µè¯å·ç è·³è½¬æ‹¨å·
    const textContent = `ã€${room} å…¥ä½æŒ‡å—ã€‘

=== WiFi ===
${wifi}

=== å…¥ä½æ–¹å¼ ===
${checkin}

=== å…¶ä»– ===
${extra}`;

    // 3. æ˜¾ç¤ºé¢„è§ˆåŒº
    const preview = document.getElementById('preview');
    const pTitle = document.getElementById('pTitle');
    preview.style.display = 'block';
    pTitle.innerText = room;

    // 4. æ¸…ç†æ—§çš„äºŒç»´ç 
    const qrContainer = document.getElementById('qrcode');
    qrContainer.innerHTML = ''; 

    // 5. ç”ŸæˆäºŒç»´ç  (æœ€ç®€é…ç½®ï¼Œå‡å°‘å‡ºé”™æ¦‚ç‡)
    // EasyQRCodeJS ä¼šè‡ªåŠ¨å¤„ç† UTF-8 ç¼–ç 
    new QRCode(qrContainer, {
      text: textContent,
      width: 260,      // ç¨å¾®å¤§ä¸€ç‚¹ï¼Œæ›´æ¸…æ™°
      height: 260,
      colorDark: "#000000",
      colorLight: "#ffffff",
      correctLevel: QRCode.CorrectLevel.M, // Mçº§å®¹é”™ï¼Œå¹³è¡¡æ•°æ®é‡å’Œæ¸…æ™°åº¦
      quietZone: 10,   // ç•™ç™½è¾¹è·ï¼Œç¡®ä¿èƒ½æ‰«å‡ºæ¥
      quietZoneColor: '#ffffff' // è¾¹è·é¢œè‰²
    });

    // æ»šåŠ¨åˆ°é¢„è§ˆåŒº
    preview.scrollIntoView({ behavior: 'smooth' });
  }
</script>

</body>
</html>
